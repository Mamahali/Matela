(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(7),l=a.n(o),c=a(5),i=(a(17),a(2));const s={display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#f4f4f4"},d={display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",maxWidth:"400px",width:"100%",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#fff",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},u={fontSize:"1.5em",marginBottom:"10px",textAlign:"center"},p={display:"flex",flexDirection:"column",width:"100%"},m={marginBottom:"10px",padding:"8px",fontSize:"1em",border:"1px solid #ccc",borderRadius:"4px",outline:"none",transition:"border-color 0.3s"},g={padding:"10px",fontSize:"1em",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.3s"},b={color:"red",marginTop:"10px",fontSize:"0.9em"},y={marginTop:"20px",padding:"8px",fontSize:"1em",backgroundColor:"#008CBA",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.3s"};var h=e=>{let{setActiveUser:t,setShowSection:a,showSection:o}=e;const[l,c]=Object(r.useState)(""),[i,h]=Object(r.useState)(""),[x,E]=Object(r.useState)(""),[f,S]=Object(r.useState)(""),[w,v]=Object(r.useState)(""),[C,k]=Object(r.useState)(""),[O,j]=Object(r.useState)([]);Object(r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("users"))||[];j(e)},[]);return n.a.createElement("div",{style:s},n.a.createElement("div",{style:d},n.a.createElement("h1",{style:u},"signUp"===o?"Sign Up":"Login"," to Wings Cafe Inventory System"),"signUp"===o?n.a.createElement("form",{onSubmit:e=>{if(e.preventDefault(),O.some(e=>e.username===x))return void k("Username already exists. Please choose another.");if(O.some(e=>e.email===w))return void k("Email already exists. Please use another.");const t=[...O,{username:x,password:f,email:w}];j(t),localStorage.setItem("users",JSON.stringify(t)),alert("Sign-up successful! You can now log in."),a("login")},style:p},n.a.createElement("input",{type:"text",value:x,onChange:e=>E(e.target.value),placeholder:"New Username",required:!0,style:m}),n.a.createElement("input",{type:"email",value:w,onChange:e=>v(e.target.value),placeholder:"Email",required:!0,style:m}),n.a.createElement("input",{type:"password",value:f,onChange:e=>S(e.target.value),placeholder:"New Password",required:!0,style:m}),n.a.createElement("button",{type:"submit",style:g},"Sign Up"),C&&n.a.createElement("p",{style:b},C)):n.a.createElement("form",{onSubmit:e=>{e.preventDefault();const a=O.find(e=>e.username===l&&e.password===i);a?(localStorage.setItem("loggedIn","true"),localStorage.setItem("activeUser",JSON.stringify(a)),t(a),k("")):k("Invalid username or password.")},style:p},n.a.createElement("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"Username",required:!0,style:m}),n.a.createElement("input",{type:"password",value:i,onChange:e=>h(e.target.value),placeholder:"Password",required:!0,style:m}),n.a.createElement("button",{type:"submit",style:g},"Login"),C&&n.a.createElement("p",{style:b},C)),n.a.createElement("button",{onClick:()=>a("login"===o?"signUp":"login"),style:y},"signUp"===o?"Already a user? Log in here":"New user? Sign Up here")))};var x=()=>{const[e,t]=Object(r.useState)([]),[a,o]=Object(r.useState)({name:"",category:"",price:"",quantity:""}),[l,c]=Object(r.useState)(null),[i,s]=Object(r.useState)(""),[d,u]=Object(r.useState)("");Object(r.useEffect)(()=>{p()},[]);const p=async()=>{try{const a=await fetch("http://localhost:5000/api/product");if(!a.ok)throw new Error("Failed to fetch products");const r=await a.json();t(r),localStorage.setItem("products",JSON.stringify(r))}catch(e){console.error("Fetch products error:",e),u("Error fetching products. Loading cached data.");const a=localStorage.getItem("products");a&&t(JSON.parse(a))}},m=async(e,t)=>{const a=parseInt(i,10);if(isNaN(a)||a<=0)alert("Please enter a valid quantity to add or deduct.");else try{if(!(await fetch(`http://localhost:5000/api/products/${e}/quantity`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({changeType:t,quantityChange:a})})).ok)throw new Error("Failed to update quantity");p(),s("")}catch(r){console.error("Quantity change error:",r),u("Error updating quantity")}},g=()=>{o({name:"",category:"",price:"",quantity:""}),c(null),u("")};return n.a.createElement("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"}},n.a.createElement("h2",{style:{textAlign:"center",marginBottom:"20px"}},l?"Edit Product":"Add New Product"),d&&n.a.createElement("p",{style:{color:"red"}},d),n.a.createElement("input",{value:a.name,onChange:e=>o({...a,name:e.target.value}),placeholder:"Product Name",style:{padding:"8px",margin:"10px 0",width:"100%",borderRadius:"4px"}}),n.a.createElement("input",{value:a.category,onChange:e=>o({...a,category:e.target.value}),placeholder:"Category",style:{padding:"8px",margin:"10px 0",width:"100%",borderRadius:"4px"}}),n.a.createElement("input",{value:a.price,onChange:e=>o({...a,price:e.target.value}),placeholder:"Price",type:"number",style:{padding:"8px",margin:"10px 0",width:"100%",borderRadius:"4px"}}),n.a.createElement("input",{value:a.quantity,onChange:e=>o({...a,quantity:e.target.value}),placeholder:"Quantity",type:"number",style:{padding:"8px",margin:"10px 0",width:"100%",borderRadius:"4px"}}),n.a.createElement("button",{onClick:async()=>{const e={...a,price:parseFloat(a.price)||0,quantity:parseInt(a.quantity,10)||0};try{let a;if(!(a=l?await fetch(`http://localhost:5000/api/product/${l}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}):await fetch("http://localhost:5000/api/product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Failed to save product");p(),g()}catch(t){console.error("Save product error:",t),u("Error saving product")}},style:{padding:"10px 20px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px"}},l?"Update Product":"Add Product"),n.a.createElement("h3",{style:{marginTop:"30px"}},"Product List"),n.a.createElement("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"20px"}},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Category"),n.a.createElement("th",null,"Price"),n.a.createElement("th",null,"Quantity"),n.a.createElement("th",null,"Actions"))),n.a.createElement("tbody",null,e.map(t=>n.a.createElement("tr",{key:t.name},n.a.createElement("td",null,t.name),n.a.createElement("td",null,t.category),n.a.createElement("td",null,t.price),n.a.createElement("td",null,t.quantity),n.a.createElement("td",null,n.a.createElement("button",{onClick:()=>(t=>{const a=e.find(e=>e.name===t);o({name:a.name,category:a.category,price:a.price,quantity:a.quantity}),c(t)})(t.name),style:{padding:"5px 10px",backgroundColor:"#f0ad4e",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Edit"),n.a.createElement("button",{onClick:()=>(async e=>{try{if(!(await fetch(`http://localhost:5000/api/product/${e}`,{method:"DELETE"})).ok)throw new Error("Failed to delete product");p()}catch(t){console.error("Delete product error:",t),u("Error deleting product")}})(t.name),style:{padding:"5px 10px",backgroundColor:"#d9534f",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Delete"),n.a.createElement("button",{onClick:()=>m(t.name,"add"),style:{padding:"5px 10px",backgroundColor:"#5bc0de",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Add Quantity"),n.a.createElement("button",{onClick:()=>m(t.name,"deduct"),style:{padding:"5px 10px",backgroundColor:"#f0ad4e",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"}},"Deduct Quantity"),n.a.createElement("input",{type:"number",value:i,onChange:e=>s(e.target.value),placeholder:"Enter qty",style:{padding:"5px",margin:"5px 0",width:"80%",borderRadius:"4px"}})))))))},E=a(8);a(18);var f=e=>{let{activeUser:t}=e;const[a,o]=Object(r.useState)([]),[l,c]=Object(r.useState)(0),[i,s]=Object(r.useState)([]),[d,u]=Object(r.useState)(0),p=["/Matela/images/biscuits.jpeg","/Matela/images/image2.jpg","/Matela/images/image3.jpg"];Object(r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("products"))||[];o(e);const t=e.reduce((e,t)=>e+t.quantity,0);c(t);const a=e.filter(e=>e.quantity<5);s(a)},[]),Object(r.useEffect)(()=>{const e=setInterval(()=>{u(e=>(e+1)%p.length)},3e3);return()=>clearInterval(e)},[p.length]);const m={labels:a.map(e=>e.name),datasets:[{label:"Quantity in Stock",data:a.map(e=>e.quantity),backgroundColor:"rgba(54, 162, 235, 0.6)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]};return n.a.createElement("div",{style:{padding:"20px",backgroundColor:"#f4f4f4",borderRadius:"8px",maxWidth:"800px",margin:"0 auto"}},n.a.createElement("h1",{style:{color:"#333",fontSize:"24px",textAlign:"center"}},"Welcome to Wings Cafe Inventory Management, ",t),n.a.createElement("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.1)"}},n.a.createElement("h2",{style:{color:"#333",fontSize:"20px"}},"Stock Summary"),n.a.createElement("p",null,"Total Products: ",a.length),n.a.createElement("p",null,"Total Stock Quantity: ",l),n.a.createElement("p",null,"Low Stock Products:"),n.a.createElement("ul",null,i.map((e,t)=>n.a.createElement("li",{key:t,style:{color:"red"}},e.name," - Only ",e.quantity," left")))),n.a.createElement("div",{style:{marginTop:"30px",padding:"15px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.1)"}},n.a.createElement("h2",{style:{color:"#333",fontSize:"20px",textAlign:"center"}},"Stock Quantity Chart"),n.a.createElement(E.a,{data:m,options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{label:e=>`Quantity: ${e.raw}`}}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Quantity"}},x:{title:{display:!0,text:"Product Name"}}}}})),n.a.createElement("div",{style:{marginTop:"30px",padding:"15px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0px 0px 10px rgba(0, 0, 0, 0.1)",textAlign:"center"}},n.a.createElement("h2",{style:{color:"#333",fontSize:"20px"}},"Product Images"),n.a.createElement("img",{src:p[d],alt:`Product ${d+1}`,style:{width:"200px",height:"auto",margin:"0 auto"}})))};var S=function(e){let{users:t,setUsers:a}=e;const[o,l]=Object(r.useState)(""),[c,i]=Object(r.useState)(""),[s,d]=Object(r.useState)(""),[u,p]=Object(r.useState)(null);Object(r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("users"))||[];a(e)},[a]);const m=()=>{l(""),i(""),d(""),p(null)},g={marginBottom:"10px",padding:"8px",width:"100%",boxSizing:"border-box",borderRadius:"4px",border:"1px solid #ccc"},b={backgroundColor:"#007bff",color:"white",padding:"10px 20px",border:"none",borderRadius:"4px",cursor:"pointer",width:"100%",marginTop:"10px"},y={backgroundColor:"#ffffff",padding:"15px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",marginBottom:"10px"},h={textAlign:"center",color:"#333"},x={display:"flex",justifyContent:"center",gap:"10px",marginTop:"10px"};return n.a.createElement("div",{style:{padding:"20px",backgroundColor:"#f4f4f4",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",width:"800px",margin:"auto"}},n.a.createElement("h2",{style:h},"User Management"),n.a.createElement("input",{value:o,onChange:e=>l(e.target.value),placeholder:"Username",style:g}),n.a.createElement("input",{value:c,onChange:e=>i(e.target.value),placeholder:"Password",style:g}),n.a.createElement("input",{value:s,onChange:e=>d(e.target.value),placeholder:"Email",style:g}),n.a.createElement("button",{onClick:()=>{const e={username:o,password:c,email:s};if(null!==u){const r=[...t];r[u]=e,a(r),localStorage.setItem("users",JSON.stringify(r))}else{const r=[...t,e];a(r),localStorage.setItem("users",JSON.stringify(r))}m()},style:b},null!==u?"Update":"Add"," User"),n.a.createElement("h3",{style:h},"User List"),0===t.length?n.a.createElement("p",{style:{textAlign:"center"}},"No users available."):n.a.createElement("ul",{style:{listStyleType:"none",paddingLeft:"0"}},t.map((e,r)=>n.a.createElement("li",{key:r,style:y},n.a.createElement("h4",null,e.username),n.a.createElement("p",null,"Email: ",e.email),n.a.createElement("div",{style:x},n.a.createElement("button",{onClick:()=>(e=>{l(t[e].username),i(t[e].password),d(t[e].email),p(e)})(r),style:{...b,backgroundColor:"#007bff",width:"auto"}},"Edit"),n.a.createElement("button",{onClick:()=>(e=>{const r=t.filter((t,a)=>a!==e);a(r),localStorage.setItem("users",JSON.stringify(r))})(r),style:{...b,backgroundColor:"#e74c3c",width:"auto"}},"Delete"))))))};const w={display:"flex",justifyContent:"center",gap:"15px",marginBottom:"20px",backgroundColor:"#f4f4f4",padding:"10px 0"},v={backgroundColor:"#4CAF50",color:"white",padding:"10px 20px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",transition:"background-color 0.3s"},C={backgroundColor:"#f44336",color:"white",padding:"10px 20px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"16px",transition:"background-color 0.3s"};var k=function(){const[e,t]=Object(r.useState)([]),[a,o]=Object(r.useState)([]),[l,c]=Object(r.useState)(null),[s,d]=Object(r.useState)("login"),[u,p]=Object(r.useState)(!1),[m,g]=Object(r.useState)(null),b=Object(i.p)(),y=async(e,t)=>{try{p(!0);const r=await fetch(e);if(!r.ok)throw new Error(`Failed to fetch ${e}. Status: ${r.status}`);const n=r.headers.get("content-type");if(n&&n.includes("application/json"))t(await r.json());else{const e=await r.text();g(`Expected JSON but got HTML content: ${e.substring(0,200)}`),console.error("Received HTML content:",e)}}catch(a){console.error(`Error fetching ${e}:`,a),g(`Error fetching data from ${e}: ${a.message}`)}finally{p(!1)}};return Object(r.useEffect)(()=>{y("/api/users",t),y("/api/product",o)},[]),Object(r.useEffect)(()=>{l?localStorage.setItem("activeUser",JSON.stringify(l)):localStorage.removeItem("activeUser")},[l]),n.a.createElement("div",{className:"App"},m&&n.a.createElement("p",{style:{color:"red"}},m),l&&n.a.createElement("nav",{style:w},n.a.createElement("button",{onClick:()=>b("/dashboard"),style:v},"Dashboard"),n.a.createElement("button",{onClick:()=>b("/productManagement"),style:v},"Product Management"),n.a.createElement("button",{onClick:()=>b("/userManagement"),style:v},"User Management"),n.a.createElement("button",{onClick:async()=>{try{p(!0);const t=await fetch("/api/logout",{method:"POST"});if(!t.ok){const e=await t.text();throw new Error(`Logout failed: ${e||t.statusText}`)}c(null),localStorage.removeItem("activeUser"),alert("You have been logged out."),b("/")}catch(e){console.error("Error logging out:",e),g(`Error logging out: ${e.message}`)}finally{p(!1)}},style:C},"Logout")),u&&n.a.createElement("p",null,"Loading..."),n.a.createElement(i.d,null,n.a.createElement(i.b,{path:"/",element:l?n.a.createElement(i.a,{to:"/dashboard"}):n.a.createElement(h,{setActiveUser:c,users:e,setShowSection:d,showSection:s})}),n.a.createElement(i.b,{path:"/dashboard",element:l?n.a.createElement(f,{products:a}):n.a.createElement(i.a,{to:"/"})}),n.a.createElement(i.b,{path:"/productManagement",element:l?n.a.createElement(x,{setProducts:o,products:a}):n.a.createElement(i.a,{to:"/"})}),n.a.createElement(i.b,{path:"/userManagement",element:l?n.a.createElement(S,{users:e,setUsers:t}):n.a.createElement(i.a,{to:"/"})})))};var O=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,20)).then(t=>{let{getCLS:a,getFID:r,getFCP:n,getLCP:o,getTTFB:l}=t;a(e),r(e),n(e),o(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(c.a,null,n.a.createElement(k,null)))),O()},9:function(e,t,a){e.exports=a(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.90c1152a.chunk.js.map